# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: hyperblue
description: Custom image for bluefin-dx with waydroid, hyprland and essential development tools.
base-image: ghcr.io/ublue-os/bluefin-dx
image-version: 42

modules:
  ### Base ###
  - type: files
    files:
      # copy base recipe files
      - source: usr
        destination: /usr
      # copy user files
      - source: /etc/skel
        destination: /etc/skel/

  - type: default-flatpaks
    notify: true
    system:
      repo-url: https://dl.flathub.org/repo/flathub.flatpakrepo
      repo-name: flathub
      repo-title: "Flathub (system-wide)"
      remove:
        - org.gnome.eog
      install:
        # - one.ablaze.floorp//lightning # This is an example of flatpak which has multiple branches in selection (flatpak//branch).
        - app.devsuite.Ptyxis
        - com.github.tchx84.Flatseal
        - io.github.flattool.Warehouse

  - type: bling # configure what to pull in from ublue-os/bling
    install:
      # - ublue-update # https://github.com/ublue-os/ublue-update
      - dconf-update-service
      - rpmfusion

  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/solopasha/hyprland/repo/fedora-%OS_VERSION%/solopasha-hyprland-fedora-%OS_VERSION%.repo
    install:
      # base
      - openssh-server # ssh server

      # hyprland
      - hyprland
      - hyprpaper # wallpaper util
      - hyprpicker # color picker
      - hyprshot # screenshot util
      - xdg-desktop-portal-hyprland # desktop portal

      # audio
      - pavucontrol
      - pipewire
      - playerctl
      - wireplumber

      # bluetooth
      - blueman

      # terminal
      - alacritty # terminal
      - micro # tui editor better than nano
      - zsh # shell

      # modern cli tools https://github.com/ibraheemdev/modern-unix
      - duf
      - eza
      - fd-find
      - httpie
      - procs
      - tldr

      # network
      - network-manager-applet
      - NetworkManager-l2tp-gnome
      - NetworkManager-libreswan-gnome
      - NetworkManager-openconnect-gnome
      - NetworkManager-openvpn-gnome
      - NetworkManager-pptp-gnome
      - NetworkManager-sstp-gnome
      - NetworkManager-vpnc-gnome

      # qt
      - qt5-qtwayland
      - qt6-qtwayland

      # dev tools
      - podman
      - podman-compose
      

      # zerotier
      - zerotier-one

      # wayland
      - waydroid

      # other
      - htop
      - bolt
      - brightnessctl
      - dunst # notification daemon
      - fprintd-pam
      - gnome-keyring-pam
      - lxqt-policykit
      - nautilus
      - pinentry-gnome3
      - plymouth-system-theme
      - rofi-wayland
      - sddm-wayland-generic # display manager
      - system-config-printer
      - waybar
      - wl-clipboard
    # remove:
    #   - firefox # default firefox removed in favor of flatpak
    #   - firefox-langpacks # langpacks needs to also be removed to prevent dependency problems

  - type: systemd
    system:
      enabled:
        - zerotier-one.service
    user:
      enabled:
        # - sshd.service
        - podman.service

  # enable linuxbrew
  - type: brew
    nofile-limits: true # increase nofile limits
    brew-analytics: false # disable telemetry

  # - type:
  #     yafti
  #     # if included, yafti and it's dependencies (pip & libadwaita)
  #     #  will be installed and set up
  #   custom-flatpaks:
  #     # this section is optional
  #     - Celluloid: io.github.celluloid_player.Celluloid
  #     # - Krita: org.kde.krita

  ### Extras ###

  # run scripts
  - type: script
    scripts: # scripts in config/scripts/
      - install_extras.sh

  # sign images.
  - type: signing # this sets up the proper policy & signing files for signed images to work fully
